!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).ajax=factory()}(this,function(){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},window_1="undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{},has=Object.prototype.hasOwnProperty;function decode(input){try{return decodeURIComponent(input.replace(/\+/g," "))}catch(e){return null}}var querystringify_1={stringify:function(obj,prefix){prefix=prefix||"";var value,key,pairs=[];for(key in"string"!=typeof prefix&&(prefix="?"),obj)if(has.call(obj,key)){if((value=obj[key])||null!=value&&!isNaN(value)||(value=""),key=encodeURIComponent(key),value=encodeURIComponent(value),null===key||null===value)continue;pairs.push(key+"="+value)}return pairs.length?prefix+pairs.join("&"):""},parse:function(query){for(var part,parser=/([^=?&]+)=?([^&]*)/g,result={};part=parser.exec(query);){var key=decode(part[1]),value=decode(part[2]);null===key||null===value||key in result||(result[key]=value)}return result}};function isObjectObject(o){return!0===function(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}(o)&&"[object Object]"===Object.prototype.toString.call(o)}function assignSymbols(receiver,objects){if(null==receiver)throw new TypeError("expected first argument to be an object.");if(void 0===objects||"undefined"==typeof Symbol)return receiver;if("function"!=typeof Object.getOwnPropertySymbols)return receiver;for(var isEnumerable=Object.prototype.propertyIsEnumerable,target=Object(receiver),len=arguments.length,i=0;++i<len;)for(var provider=Object(arguments[i]),names=Object.getOwnPropertySymbols(provider),j=0;j<names.length;j++){var key=names[j];isEnumerable.call(provider,key)&&(target[key]=provider[key])}return target}var isExtendable=function(val){return function(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}(val)||"function"==typeof val||Array.isArray(val)},extendShallow=Object.assign||function(obj){if(null==obj)throw new TypeError("Cannot convert undefined or null to object");isObject(obj)||(obj={});for(var i=1;i<arguments.length;i++){var val=arguments[i];isString(val)&&(val=toObject(val)),isObject(val)&&(assign(obj,val),assignSymbols(obj,val))}return obj};function assign(a,b){for(var key in b)hasOwn(b,key)&&(a[key]=b[key])}function isString(val){return val&&"string"==typeof val}function toObject(str){var obj={};for(var i in str)obj[i]=str[i];return obj}function isObject(val){return val&&"object"==typeof val||isExtendable(val)}function hasOwn(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}var defaults={url:"",method:"GET",cache:!0},optionalProperties=["responseType","withCredentials","timeout","onprogress"];return function(opts){return new Promise(function(resolve,reject){"string"==typeof opts&&(opts=extendShallow({},defaults,{url:opts}));var data,options=extendShallow({},defaults,opts),headers=extendShallow({"X-RequestedWith":"XMLHttpRequest"},options.headers),isGet="get"===options.method.toLowerCase(),cacheOption={};data=isGet?(options.cache||(cacheOption._=Date.now()),extendShallow({},options.data,cacheOption)):options.data;var url=options.url,req=function(cors){var nav=window_1.navigator||"";return cors&&window_1.XDomainRequest&&!/MSIE 1/.test(nav.userAgent)?new XDomainRequest:new XMLHttpRequest}(options.cors);if(isGet&&Object.keys(data).length){var qs=querystringify_1.stringify(data);url=-1===url.indexOf("?")?url+"?"+qs:url+"&"+qs}for(var field in req.open(options.method,url,!0),optionalProperties.forEach(function(p){void 0!==options[p]&&(req[p]=options[p])}),headers)req.setRequestHeader(field,headers[field]);req.onload=function(){var outData=function(req){return req.responseType?req.response:-1!==(req.getResponseHeader("content-type")||"").indexOf("application/json")?JSON.parse(req.responseText):req.responseText}(req);200<=req.status&&req.status<300?resolve({data:outData,status:"Success",xhr:req}):reject({data:outData,status:req.statusText,xhr:req})},req.onerror=function(){reject({data:"Error",status:req.statusText,xhr:req})},req.ontimeout=function(){reject({data:"Timeout",status:req.statusText,xhr:req})},req.onabort=function(){reject({data:"Abort",status:req.statusText,xhr:req})},req.send(data)})}});
